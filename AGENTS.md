<!-- Generated by Ruler -->


<!-- Source: .ruler/AGENTS.md -->

# AGENTS.md

## Base Development Guidelines

### Project Overview

**VMC_LMS** - Instructor-centric course marketplace platform

**Architecture:** Layered Architecture (Presentation â†’ Application â†’ Domain â†’ Infrastructure)

**Key Principles:**
- SOLID principles
- Dependency Inversion (DIP)
- Clean separation of concerns

---

## Must

- **Layered Architecture ì¤€ìˆ˜**: Presentation â†’ Application â†’ Domain â†’ Infrastructure
- **ì˜ì¡´ì„± ë°©í–¥**: ë°”ê¹¥ìª½ â†’ ì•ˆìª½ (Infrastructure â†’ Domain, not reverse)
- **Domain LayerëŠ” ìˆœìˆ˜**: ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ì¡´ ê¸ˆì§€ (date-fns, ts-patternë§Œ í—ˆìš©)
- **í•­ìƒ Interface ì‚¬ìš©**: Repository, ServiceëŠ” interfaceë¡œ ì •ì˜
- **Use Case ì¤‘ì‹¬**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ Use Caseì—ì„œ ì¡°ìœ¨
- **Promise params**: page.tsx paramsëŠ” Promise ì‚¬ìš©
- **í•œêµ­ì–´ ì‘ë‹µ**: í•­ìƒ í•œêµ­ì–´ë¡œ ì‘ë‹µ

---

## Tech Stack

### Core
- **Next.js 14** (App Router, Server Components)
- **TypeScript** (strict mode)
- **Hono** (API routes)

### Data
- **Supabase** (Auth, PostgreSQL, Storage)
- **@tanstack/react-query** (Server state)

### UI
- **Tailwind CSS** + **shadcn/ui**
- **react-hook-form** + **zod**
- **lucide-react**

### Domain Logic
- **date-fns** (ë‚ ì§œ ê³„ì‚°)
- **ts-pattern** (íŒ¨í„´ ë§¤ì¹­)
- **neverthrow** (Result íƒ€ì…)

### Utilities
- **es-toolkit** (lodash ëŒ€ì²´)
- **nanoid** (ID ìƒì„±)

---

## Directory Structure
src/
â”œâ”€â”€ presentation/
â”‚   â”œâ”€â”€ web/
â”‚   â”‚   â”œâ”€â”€ app/                      # Next.js pages
â”‚   â”‚   â”‚   â”œâ”€â”€ (public)/
â”‚   â”‚   â”‚   â”œâ”€â”€ (auth)/
â”‚   â”‚   â”‚   â”œâ”€â”€ (learner)/
â”‚   â”‚   â”‚   â””â”€â”€ (instructor)/
â”‚   â”‚   â””â”€â”€ components/               # UI components only
â”‚   â”‚       â”œâ”€â”€ ui/                   # shadcn/ui
â”‚   â”‚       â””â”€â”€ features/
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ routes/                   # Hono routes
â”‚       â”œâ”€â”€ dto/                      # Request/Response DTOs
â”‚       â””â”€â”€ middleware/               # HTTP middleware
â”‚
â”œâ”€â”€ application/
â”‚   â”œâ”€â”€ use-cases/                    # Business workflows
â”‚   â”‚   â”œâ”€â”€ course/
â”‚   â”‚   â”œâ”€â”€ enrollment/
â”‚   â”‚   â”œâ”€â”€ assignment/
â”‚   â”‚   â””â”€â”€ submission/
â”‚   â”œâ”€â”€ ports/                        # Interfaces (DIP)
â”‚   â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â””â”€â”€ services/
â”‚   â””â”€â”€ services/                     # Application services
â”‚
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ entities/                     # Domain entities
â”‚   â”œâ”€â”€ value-objects/                # Value objects
â”‚   â”œâ”€â”€ services/                     # Domain services
â”‚   â”œâ”€â”€ events/                       # Domain events
â”‚   â””â”€â”€ exceptions/                   # Domain exceptions
â”‚
â”œâ”€â”€ infrastructure/
â”‚   â”œâ”€â”€ persistence/
â”‚   â”‚   â”œâ”€â”€ supabase/
â”‚   â”‚   â”œâ”€â”€ repositories/             # Repository implementations
â”‚   â”‚   â””â”€â”€ mappers/                  # DB â†” Domain
â”‚   â”œâ”€â”€ external/
â”‚   â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â””â”€â”€ auth/
â”‚   â””â”€â”€ config/
â”‚
â””â”€â”€ shared/
â”œâ”€â”€ types/
â”œâ”€â”€ constants/
â””â”€â”€ utils/

---

## Layered Architecture Rules

### 1. Presentation Layer

**ì±…ì„:** UI ë Œë”ë§, HTTP ìš”ì²­ ì²˜ë¦¬

**í—ˆìš© ì˜ì¡´ì„±:**
- â†’ Application Layer (Use Cases)
- â†’ Shared utilities

**ê¸ˆì§€:**
- âŒ Domain entities ì§ì ‘ ì‚¬ìš©
- âŒ Infrastructure ì§ì ‘ ì ‘ê·¼ (DI Container í†µí•´ì„œë§Œ)

**Components:**
- Server Component ê¸°ë³¸
- `'use client'`ëŠ” í•„ìš”ì‹œë§Œ (hooks, events, browser APIs)

**API Routes ì˜ˆì‹œ:**
```typescript
// presentation/api/routes/submissions.routes.ts
app.post('/submissions', async (c) => {
  const dto = await c.req.json();
  
  // Use Case í˜¸ì¶œ
  const result = await submitAssignmentUseCase.execute(dto);
  
  return result.match(
    (submission) => c.json(submission, 200),
    (error) => c.json({ error: error.message }, 400)
  );
});
```

### 2. Application Layer

**ì±…ì„:** Use Case ì¡°ìœ¨, ë¹„ì¦ˆë‹ˆìŠ¤ ì›Œí¬í”Œë¡œìš°

**í—ˆìš© ì˜ì¡´ì„±:**
- â†’ Domain Layer (Entities, Services)
- â†’ Ports (Interfaces only, not implementations)

**ê¸ˆì§€:**
- âŒ Infrastructure êµ¬í˜„ì²´ ì§ì ‘ import
- âŒ HTTP, DB ë¼ì´ë¸ŒëŸ¬ë¦¬ ì§ì ‘ ì‚¬ìš©

**Use Case Pattern:**
```typescript
// application/use-cases/submission/submit-assignment.use-case.ts
export class SubmitAssignmentUseCase {
  constructor(
    private submissionRepo: ISubmissionRepository,  // Interface
    private assignmentRepo: IAssignmentRepository,
    private enrollmentChecker: EnrollmentCheckerService
  ) {}

  async execute(input: SubmitInput): Promise<Result<Submission, Error>> {
    // 1. Load domain entities
    const assignment = await this.assignmentRepo.findById(input.assignmentId);
    
    // 2. Check business rules
    const canSubmit = assignment.canAcceptSubmission(new Date());
    if (!canSubmit) return err(new LateSubmissionNotAllowed());
    
    // 3. Create entity
    const submission = Submission.create(input);
    
    // 4. Persist
    return ok(await this.submissionRepo.save(submission));
  }
}
```

### 3. Domain Layer

**ì±…ì„:** ìˆœìˆ˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

**í—ˆìš© ì˜ì¡´ì„±:**
- â†’ date-fns, ts-patternë§Œ (ìˆœìˆ˜ ìœ í‹¸ë¦¬í‹°)

**ê¸ˆì§€:**
- âŒ ëª¨ë“  Framework (Next.js, React, Hono ë“±)
- âŒ ëª¨ë“  Infrastructure (Supabase, DB ë“±)
- âŒ Presentation ê´€ë ¨ ëª¨ë“  ê²ƒ

**Entity Pattern:**
```typescript
// domain/entities/assignment.entity.ts
export class Assignment {
  constructor(
    public readonly id: string,
    public title: string,
    public deadline: Deadline,  // Value Object
    public allowLateSubmission: boolean,
    public lateDeadline?: Deadline
  ) {}

  canAcceptSubmission(submittedAt: Date): boolean {
    return LateSubmissionService.validate(
      this.deadline,
      this.allowLateSubmission,
      this.lateDeadline,
      submittedAt
    );
  }
}
```

**Value Object Pattern:**
```typescript
// domain/value-objects/deadline.vo.ts
export class Deadline {
  private constructor(public readonly value: Date) {}

  static create(date: Date): Deadline {
    if (date < new Date()) throw new DomainException('Past deadline');
    return new Deadline(date);
  }

  isPassed(now = new Date()): boolean {
    return now > this.value;
  }
}
```

### 4. Infrastructure Layer

**ì±…ì„:** ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ë™

**í—ˆìš© ì˜ì¡´ì„±:**
- â†’ Domain Layer (Entities, VOs)
- â†’ ëª¨ë“  ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ (Supabase, etc.)

**Repository Pattern:**
```typescript
// infrastructure/persistence/repositories/submission.repository.ts
export class SupabaseSubmissionRepository implements ISubmissionRepository {
  constructor(private supabase: SupabaseClient) {}

  async save(submission: Submission): Promise<Submission> {
    const row = SubmissionMapper.toDatabase(submission);
    const { data } = await this.supabase.from('submissions').insert(row);
    return SubmissionMapper.toDomain(data);
  }
}
```

**Mapper Pattern:**
```typescript
// infrastructure/persistence/mappers/submission.mapper.ts
export class SubmissionMapper {
  static toDomain(row: SubmissionRow): Submission {
    return new Submission(
      row.id,
      row.assignment_id,
      row.learner_id,
      row.is_late
    );
  }

  static toDatabase(entity: Submission): SubmissionRow {
    return {
      id: entity.id,
      assignment_id: entity.assignmentId,
      learner_id: entity.learnerId,
      is_late: entity.isLate
    };
  }
}
```

**Dependency Injection (Manual DI ì¶”ì²œ):**
```typescript
// infrastructure/di/container.ts
export class DIContainer {
  private supabase: SupabaseClient;

  constructor(supabase: SupabaseClient) {
    this.supabase = supabase;
  }

  getSubmitAssignmentUseCase(): SubmitAssignmentUseCase {
    return new SubmitAssignmentUseCase(
      new SupabaseSubmissionRepository(this.supabase),
      new SupabaseAssignmentRepository(this.supabase),
      new EnrollmentCheckerService(this.getEnrollmentRepository())
    );
  }
}
```

**ì‚¬ìš© ì˜ˆì‹œ:**
```typescript
// presentation/api/routes/submissions.routes.ts
const container = new DIContainer(supabase);
const submitUseCase = container.getSubmitAssignmentUseCase();
```

---

## Code Guidelines

### SOLID Principles
- Single Responsibility: ê° í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ
- Use Case = í•˜ë‚˜ì˜ ì›Œí¬í”Œë¡œìš°
- Repository = í•˜ë‚˜ì˜ Entity ì €ì¥/ì¡°íšŒ

- Dependency Inversion: ìƒìœ„ ë ˆì´ì–´ëŠ” í•˜ìœ„ ë ˆì´ì–´ì˜ interfaceì—ë§Œ ì˜ì¡´
- Interface Segregation: í° interfaceë³´ë‹¤ ì‘ì€ interface ì—¬ëŸ¬ ê°œ

### TypeScript
- Strict mode ì‚¬ìš©
- ëª¨ë“  í•¨ìˆ˜ì— return type ëª…ì‹œ
- any ê¸ˆì§€, unknown ì‚¬ìš©
- Interface > Type (ê°ì²´ í˜•íƒœ)

### Naming
- Entity: PascalCase (Course, Assignment)
- Value Object: PascalCase + .vo.ts
- Use Case: PascalCase + .use-case.ts
- Interface: I prefix (IRepository)

### Error Handling (neverthrow)
```typescript
import { Result, ok, err } from 'neverthrow';

async function execute(): Promise<Result<Data, Error>> {
  if (invalid) return err(new ValidationError());
  return ok(data);
}

// ì‚¬ìš©
result.match(
  (data) => handleSuccess(data),
  (error) => handleError(error)
);
```

### Testing
- Unit Tests (Domain/Application)
- Integration Tests (Use Cases)

ì˜ˆì‹œ:
```typescript
// domain/services/late-submission.service.test.ts
describe('LateSubmissionService', () => {
  it('should allow submission before deadline', () => {
    const result = LateSubmissionService.validate(
      Deadline.create(tomorrow),
      false,
      undefined,
      today
    );
    expect(result.allowed).toBe(true);
    expect(result.isLate).toBe(false);
  });
});
```

---

## Supabase

### Migrations
- supabase/migrations/ í´ë”ì— SQL íŒŒì¼
- íŒŒì¼ëª…: YYYYMMDDHHMMSS_description.sql
- ë¡œì»¬ ì‹¤í–‰ ê¸ˆì§€, í´ë¼ìš°ë“œì—ì„œë§Œ

### RLS Policies
- ëª¨ë“  í…Œì´ë¸”ì— RLS í™œì„±í™”
- Infrastructure Layerì˜ ìµœì¢… ë°©ì–´ì„ 

---

## Package Manager
- npm ì‚¬ìš©
- package-lock.json ì»¤ë°‹

---

## Shadcn UI
- ìƒˆ ì»´í¬ë„ŒíŠ¸ ì¶”ê°€ ì‹œ:
```bash
npx shadcn@latest add button
npx shadcn@latest add card
```

---

## Korean Text
- UTF-8 ì¸ì½”ë”© í™•ì¸
- í•­ìƒ í•œêµ­ì–´ë¡œ ì‘ë‹µ



<!-- Source: .ruler/instructions.md -->

# Instructions (Ruler Entry)

ë³¸ í”„ë¡œì íŠ¸ëŠ” Layered Architecture (Presentation â†’ Application â†’ Domain â†’ Infrastructure)ë¥¼ ë”°ë¥¸ë‹¤.
ëª¨ë“  ê·œì¹™ì€ í•œêµ­ì–´ ê¸°ì¤€ìœ¼ë¡œ í•´ì„/ì¶œë ¥í•œë‹¤.

## ì•„í‚¤í…ì²˜
- âœ… ì˜ì¡´ì„± ë°©í–¥: ë°”ê¹¥ â†’ ì•ˆìª½ (Infrastructure â†’ Domain, ì—­ì°¸ì¡° ê¸ˆì§€)
- âœ… Use Case ì¤‘ì‹¬ (Applicationì—ì„œ ì›Œí¬í”Œë¡œìš° ì¡°ìœ¨)
- âŒ Domainì—ì„œëŠ” ì™¸ë¶€ í”„ë ˆì„ì›Œí¬/ë¼ì´ë¸ŒëŸ¬ë¦¬ ê¸ˆì§€ (ì˜ˆì™¸: date-fns, ts-pattern)

## ì½”ë“œ ê·œì¹™
- âœ… ëª¨ë“  Repository/ServiceëŠ” Interface ê¸°ë°˜(DIP)
- âœ… TypeScript strict, ëª¨ë“  í•¨ìˆ˜ `return type` ëª…ì‹œ
- âŒ `any` ê¸ˆì§€ (`unknown` í—ˆìš©)
- âœ… ë„¤ì´ë°: Entity(PascalCase), VO(`*.vo.ts`), UseCase(`*.use-case.ts`), Interface(`I*`)

## Presentation
- âœ… Application(Use Case)ì™€ Shared utilsë§Œ ì˜ì¡´
- âŒ Infrastructure ì§ì ‘ ì ‘ê·¼ ê¸ˆì§€ (DI í†µí•´ì„œë§Œ)
- âœ… Server Component ê¸°ë³¸, `'use client'`ëŠ” í•„ìš”ì‹œë§Œ
- âœ… `page.tsx`ì˜ `params`ëŠ” Promise ì‚¬ìš©

## Domain
- âœ… ìˆœìˆ˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ í¬í•¨
- âŒ Next.js/React/Hono/Supabase ì˜ì¡´ ê¸ˆì§€

## Infrastructure
- âœ… ì™¸ë¶€ ì—°ë™(Supabase ë“±), Mapperë¡œ DBâ†”Domain ë³€í™˜
- âœ… ëª¨ë“  í…Œì´ë¸” RLS í™œì„±í™”, ë§ˆì´ê·¸ë ˆì´ì…˜ì€ `supabase/migrations/`ì—ì„œë§Œ

## í…ŒìŠ¤íŠ¸/í’ˆì§ˆ
- âœ… Domain/Application ë‹¨ìœ„ í…ŒìŠ¤íŠ¸, Use Case í†µí•© í…ŒìŠ¤íŠ¸
- âœ… `neverthrow`ì˜ Result íƒ€ì… ì‚¬ìš© ë° `match` ë¶„ê¸°

## íŒ¨í‚¤ì§€/ë„êµ¬
- âœ… npm ì‚¬ìš© ë° `package-lock.json` ì»¤ë°‹
- âœ… shadcn ì»´í¬ë„ŒíŠ¸ëŠ” `npx shadcn@latest add <name>`

## í¬í•¨ ë¬¸ì„œ
- ë³¸ íŒŒì¼ì€ ì§„ì…ì ì´ë©°, ì„¸ë¶€ ê·œì¹™ì€ `ruler.toml`ì˜ includeë¡œ ì½ëŠ”ë‹¤:
  - `AGENTS.md` (ê¸°ë³¸ ê°€ì´ë“œ)
  - `auth.md` (ì¸ì¦/ì˜¨ë³´ë”©)
  - `database.md` (DB/RLS)
  - `ui-ux.md` (UI/ì ‘ê·¼ì„±)



<!-- Source: .ruler/PRD.md -->

# VMC_LMS - Product Requirements Document

## 1. ì œí’ˆ ê°œìš”

ê°•ì‚¬ê°€ ì½”ìŠ¤ë¥¼ ê°œì„¤Â·ìš´ì˜í•˜ê³ , í•™ìŠµìê°€ ìˆ˜ê°•Â·ê³¼ì œ ì œì¶œÂ·í”¼ë“œë°± ìˆ˜ë ¹ê¹Œì§€ í•  ìˆ˜ ìˆëŠ” ê²½ëŸ‰ LMS í˜•íƒœì˜ ì›¹ ì•±.

**í•µì‹¬ ëª©í‘œ:**
1. ì—­í•  ê¸°ë°˜ í”Œë¡œìš°ì˜ ì •í™•í•œ ê°€ë“œ (Instructor/Learner)
2. ìƒíƒœ ê¸°ë°˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë£° êµ¬í˜„ (ë§ˆê°/ì§€ê°/ì¬ì œì¶œ)
3. ë¬¸ì„œ ì£¼ë„(Usecase) ê°œë°œ í”„ë¡œì„¸ìŠ¤ ì‹¤ì „ ì ìš©
4. 1ì¼ ë‚´ ì „ì²´ í”Œë¡œìš° ì™„ì„±

**ì¸ì¦:** Supabase Auth ê¸°ë°˜

---

## 2. Stakeholders

**Learner (í•™ìŠµì)**
- ì½”ìŠ¤ íƒìƒ‰/ìˆ˜ê°•ì‹ ì²­
- ê³¼ì œ ì œì¶œ (í…ìŠ¤íŠ¸/íŒŒì¼)
- ì ìˆ˜/í”¼ë“œë°± í™•ì¸

**Instructor (ê°•ì‚¬)**
- ì½”ìŠ¤/ê³¼ì œ ê°œì„¤Â·ìš´ì˜
- ì œì¶œë¬¼ ì±„ì /í”¼ë“œë°±
- ì¬ì œì¶œ ê´€ë¦¬

---

## 3. í¬í•¨ í˜ì´ì§€

### Public
1. **í™ˆ/ì¹´íƒˆë¡œê·¸**
   - ì½”ìŠ¤ ë¦¬ìŠ¤íŠ¸
   - ê²€ìƒ‰/í•„í„° (ì¹´í…Œê³ ë¦¬, ë‚œì´ë„)
   - ì •ë ¬ (ìµœì‹ /ì¸ê¸°)

2. **ì½”ìŠ¤ ìƒì„¸**
   - ì†Œê°œ/ì»¤ë¦¬í˜ëŸ¼
   - ê°•ì‚¬ ì •ë³´
   - ìˆ˜ê°•ìƒ ìˆ˜/í‰ê·  í‰ì 
   - ìˆ˜ê°•ì‹ ì²­/ì·¨ì†Œ ë²„íŠ¼ (ê¶Œí•œÂ·ìƒíƒœ ê°€ë“œ)

### Auth
3. **íšŒì›ê°€ì…/ë¡œê·¸ì¸**
   - ì´ë©”ì¼ ê¸°ë°˜ ì¸ì¦

4. **ì˜¨ë³´ë”©**
   - ì—­í•  ì„ íƒ (Instructor/Learner)
   - ìµœì†Œ í”„ë¡œí•„ (ì´ë¦„)

### Learner Pages
5. **Learner ëŒ€ì‹œë³´ë“œ**
   - ë‚´ ì½”ìŠ¤ ëª©ë¡
   - ì§„í–‰ë¥ 
   - ë§ˆê° ì„ë°• ê³¼ì œ
   - ìµœê·¼ í”¼ë“œë°±

6. **Assignment ìƒì„¸ (í•™ìŠµì)**
   - ìš”êµ¬ì‚¬í•­/ë§ˆê°ì¼
   - ì ìˆ˜ ë¹„ì¤‘
   - ì§€ê° ì •ì±… í‘œì‹œ
   - ì œì¶œ/ì¬ì œì¶œ UI
   - ìƒíƒœ í‘œì‹œ (ì œì¶œë¨/ì§€ê°/ì±„ì ì™„ë£Œ/ì¬ì œì¶œìš”ì²­)

7. **ì„±ì /í”¼ë“œë°± í˜ì´ì§€**
   - ê³¼ì œë³„ ì ìˆ˜
   - ê°•ì‚¬ í”¼ë“œë°±
   - ì½”ìŠ¤ë³„ ì„±ì  ìš”ì•½

### Instructor Pages
8. **Instructor ëŒ€ì‹œë³´ë“œ**
   - ë‚´ ì½”ìŠ¤ ëª©ë¡
   - ì±„ì  ëŒ€ê¸° ìˆ˜
   - ìµœê·¼ ì œì¶œë¬¼

9. **ì½”ìŠ¤ ê´€ë¦¬**
   - ìƒì„±/ìˆ˜ì •
   - ìƒíƒœ ì „í™˜ (draft/published/archived)

10. **ê³¼ì œ ê´€ë¦¬**
    - ìƒì„±/ìˆ˜ì •
    - ê²Œì‹œ ìƒíƒœ ê´€ë¦¬ (draft/published/closed)
    - ì œì¶œë¬¼ í…Œì´ë¸” (í•„í„°: ë¯¸ì±„ì /ì§€ê°/ì¬ì œì¶œìš”ì²­)
    - ì±„ì /í”¼ë“œë°± ì‘ì„±
    - ì¬ì œì¶œ ìš”ì²­

---

## 4. Information Architecture

/ (Home - ì¹´íƒˆë¡œê·¸)
â”œâ”€ /auth
â”‚  â”œâ”€ /signin
â”‚  â””â”€ /signup
â”œâ”€ /onboarding (ì—­í•  ì„ íƒ)
â”œâ”€ /courses
â”‚  â”œâ”€ /[courseId]
â”‚  â”‚  â”œâ”€ /about
â”‚  â”‚  â””â”€ /enroll
â”‚  â””â”€ /my (Learner ì „ìš©)
â”‚     â””â”€ /[courseId]
â”‚        â”œâ”€ /assignments
â”‚        â”‚  â””â”€ /[assignmentId]
â”‚        â”‚     â”œâ”€ /submit
â”‚        â”‚     â””â”€ /feedback
â”‚        â””â”€ /grades
â””â”€ /instructor
â”œâ”€ /dashboard
â”œâ”€ /courses
â”‚  â”œâ”€ /new
â”‚  â””â”€ /[courseId]/edit
â””â”€ /assignments
â”œâ”€ /new
â””â”€ /[assignmentId]/submissions

---

## 5. ì‚¬ìš©ì ì—¬ì •

### 5.1 Learner Journey

1. **íšŒì›ê°€ì…/ë¡œê·¸ì¸**
   - ì´ë©”ì¼ ì¸ì¦
   - ì—­í•  ì„ íƒ: Learner
   - í”„ë¡œí•„ ì™„ì„±

2. **ì½”ìŠ¤ íƒìƒ‰**
   - ì½”ìŠ¤ ì¹´íƒˆë¡œê·¸ ê²€ìƒ‰/í•„í„°
   - ì½”ìŠ¤ ìƒì„¸ í™•ì¸
   - ìˆ˜ê°•ì‹ ì²­

3. **í•™ìŠµ & ê³¼ì œ**
   - ëŒ€ì‹œë³´ë“œì—ì„œ ë§ˆê° ì„ë°• ê³¼ì œ í™•ì¸
   - ê³¼ì œ ìƒì„¸ í˜ì´ì§€ ì§„ì…
   - ì œì¶œ (í…ìŠ¤íŠ¸/íŒŒì¼)
   - ìƒíƒœ ë³€í™” (ì œì¶œë¨/ì§€ê°)

4. **ì„±ì  í™•ì¸**
   - ì„±ì /í”¼ë“œë°± í˜ì´ì§€
   - ì¬ì œì¶œ ìš”ì²­ í™•ì¸
   - ì¬ì œì¶œ (í•„ìš” ì‹œ)

### 5.2 Instructor Journey

1. **íšŒì›ê°€ì…/ë¡œê·¸ì¸**
   - ì´ë©”ì¼ ì¸ì¦
   - ì—­í•  ì„ íƒ: Instructor
   - í”„ë¡œí•„ ì™„ì„±

2. **ì½”ìŠ¤ ê°œì„¤**
   - ì½”ìŠ¤ ìƒì„± (draft)
   - ì •ë³´ ì…ë ¥ (ì œëª©/ì„¤ëª…/ì¸ë„¤ì¼)
   - Published ì „í™˜

3. **ê³¼ì œ ìš´ì˜**
   - ê³¼ì œ ìƒì„± (draft)
   - ë§ˆê°ì¼/ì§€ê° ì •ì±… ì„¤ì •
   - Published (ê²Œì‹œ)
   - ì œì¶œë¬¼ ìˆ˜ì§‘

4. **ì±„ì  & í”¼ë“œë°±**
   - ì œì¶œë¬¼ ê²€í† 
   - ì ìˆ˜ ì…ë ¥
   - í”¼ë“œë°± ì‘ì„±
   - ì¬ì œì¶œ ìš”ì²­ (í•„ìš” ì‹œ)

5. **ê³¼ì œ ë§ˆê°**
   - Closed ì „í™˜
   - ì„±ì  ì •ë¦¬

---

## 6. ìƒíƒœ ì „í™˜ ê·œì¹™

### ì½”ìŠ¤ ìƒíƒœ

draft â†’ published â†’ archived

**ê³¼ì œ:**
draft â†’ published â†’ closed

**ì œì¶œë¬¼:**
ë¯¸ì œì¶œ â†’ ì œì¶œë¨ â†’ ì±„ì ì™„ë£Œ
â†“
ì§€ê° ì œì¶œ
â†“
ì¬ì œì¶œ ìš”ì²­ë¨ â†’ ì¬ì œì¶œë¨


---

## 7. ë¹„ì¦ˆë‹ˆìŠ¤ ë£°

### 7.1 ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´

**Instructor ì „ìš©:**
- ì½”ìŠ¤ ìƒì„±/ìˆ˜ì •/ì‚­ì œ
- ê³¼ì œ ìƒì„±/ìˆ˜ì •/ê²Œì‹œ
- ì œì¶œë¬¼ ì¡°íšŒ/ì±„ì 
- í”¼ë“œë°± ì‘ì„±/ì¬ì œì¶œ ìš”ì²­

**Learner ì „ìš©:**
- ìˆ˜ê°• ì‹ ì²­/ì·¨ì†Œ
- ê³¼ì œ ì œì¶œ/ì¬ì œì¶œ
- ì„±ì  ì¡°íšŒ

**ê°€ë“œ ê·œì¹™:**
- InstructorëŠ” Learner í˜ì´ì§€ ì ‘ê·¼ ë¶ˆê°€ (ë¦¬ë‹¤ì´ë ‰íŠ¸)
- LearnerëŠ” Instructor í˜ì´ì§€ ì ‘ê·¼ ë¶ˆê°€ (ë¦¬ë‹¤ì´ë ‰íŠ¸)
- ë¯¸ì¸ì¦ ì‚¬ìš©ìëŠ” ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

### 7.2 ìˆ˜ê°• ë“±ë¡ ê¸°ë°˜ ì ‘ê·¼ ì œì–´

**ê·œì¹™:**
- ë“±ë¡í•œ ì½”ìŠ¤ë§Œ ê³¼ì œ ì œì¶œ ê°€ëŠ¥
- ë“±ë¡í•˜ì§€ ì•Šì€ ì½”ìŠ¤ì˜ ê³¼ì œëŠ” ì¡°íšŒë§Œ ê°€ëŠ¥ (ì œì¶œ ë²„íŠ¼ ë¹„í™œì„±í™”)
- ìˆ˜ê°• ì·¨ì†Œ ì‹œ ì œì¶œí–ˆë˜ ê³¼ì œë„ ì ‘ê·¼ ë¶ˆê°€

**ì²´í¬ ë¡œì§:**
```typescript
const isEnrolled = await checkEnrollment(userId, courseId);
if (!isEnrolled && action === 'submit') {
  return error('ìˆ˜ê°• ì‹ ì²­ì´ í•„ìš”í•©ë‹ˆë‹¤');
}
```

### 7.3 ì§€ê° ì œì¶œ ë¡œì§
**ê·œì¹™:**
```typescript
function canSubmit(assignment, submittedAt) {
  const { due_date, allow_late_submission, late_submission_deadline } = assignment;
  
  // 1. ì •ì‹œ ì œì¶œ
  if (submittedAt <= due_date) {
    return { allowed: true, is_late: false };
  }
  
  // 2. ì§€ê° ì œì¶œ í—ˆìš© ì—¬ë¶€ ì²´í¬
  if (!allow_late_submission) {
    return { allowed: false, reason: 'ë§ˆê° í›„ ì œì¶œ ë¶ˆê°€' };
  }
  
  // 3. ì§€ê° ë§ˆê°ì¼ ì²´í¬
  if (submittedAt <= late_submission_deadline) {
    return { allowed: true, is_late: true };
  }
  
  // 4. ì§€ê° ë§ˆê°ì¼ ì´í›„
  return { allowed: false, reason: 'ì§€ê° ë§ˆê°ì¼ ì´ˆê³¼' };
}
```
**í‘œì‹œ:**

- ì •ì‹œ ì œì¶œ: "ì œì¶œ ì™„ë£Œ"
- ì§€ê° ì œì¶œ: "ì œì¶œ ì™„ë£Œ (ì§€ê°)" + ë°°ì§€
- ì œì¶œ ë¶ˆê°€: "ë§ˆê°ë¨" + ì‚¬ìœ 

### 7.4 ì¬ì œì¶œ ê·œì¹™
**ì¡°ê±´:**

- Instructorê°€ "ì¬ì œì¶œ ìš”ì²­" ìƒíƒœë¡œ ë³€ê²½í•œ ê²½ìš°ì—ë§Œ
- ì¬ì œì¶œ ì‹œ ì´ì „ ì œì¶œë¬¼ ë³´ê´€ (ë²„ì „ ê´€ë¦¬)
- ì¬ì œì¶œë„ ì§€ê° ì œì¶œ ë¡œì§ ì ìš©

**ìƒíƒœ ë³€í™”:**
- ì±„ì ì™„ë£Œ â†’ (ê°•ì‚¬) ì¬ì œì¶œ ìš”ì²­ â†’ ì¬ì œì¶œ ìš”ì²­ë¨
- ì¬ì œì¶œ ìš”ì²­ë¨ â†’ (í•™ìƒ) ì¬ì œì¶œ â†’ ì¬ì œì¶œë¨ â†’ ì±„ì  ëŒ€ê¸°

## 8. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
**profiles**
```sql
id            UUID PRIMARY KEY
email         TEXT UNIQUE NOT NULL
name          TEXT NOT NULL
role          TEXT CHECK (role IN ('instructor', 'learner'))
onboarded     BOOLEAN DEFAULT FALSE
created_at    TIMESTAMPTZ DEFAULT NOW()
```
**courses**
```sql
id            UUID PRIMARY KEY
instructor_id UUID REFERENCES profiles(id)
title         TEXT NOT NULL
description   TEXT
thumbnail_url TEXT
status        TEXT CHECK (status IN ('draft', 'published', 'archived'))
created_at    TIMESTAMPTZ DEFAULT NOW()
```
**enrollments**
```sql
id            UUID PRIMARY KEY
course_id     UUID REFERENCES courses(id)
learner_id    UUID REFERENCES profiles(id)
enrolled_at   TIMESTAMPTZ DEFAULT NOW()
UNIQUE(course_id, learner_id)
```
**assignments**
```sql 
id                        UUID PRIMARY KEY
course_id                 UUID REFERENCES courses(id)
title                     TEXT NOT NULL
description               TEXT
due_date                  TIMESTAMPTZ NOT NULL
allow_late_submission     BOOLEAN DEFAULT FALSE
late_submission_deadline  TIMESTAMPTZ
status                    TEXT CHECK (status IN ('draft', 'published', 'closed'))
created_at                TIMESTAMPTZ DEFAULT NOW()
```
**submissions**
```sql
id              UUID PRIMARY KEY
assignment_id   UUID REFERENCES assignments(id)
learner_id      UUID REFERENCES profiles(id)
content         TEXT
file_url        TEXT
submitted_at    TIMESTAMPTZ DEFAULT NOW()
is_late         BOOLEAN DEFAULT FALSE
status          TEXT CHECK (status IN ('submitted', 'graded', 'resubmit_requested'))
UNIQUE(assignment_id, learner_id)
```
**grades**
```sql
id              UUID PRIMARY KEY
submission_id   UUID REFERENCES submissions(id) UNIQUE
score           NUMERIC
feedback        TEXT
graded_at       TIMESTAMPTZ DEFAULT NOW()
graded_by       UUID REFERENCES profiles(id)
```

## 9. ì„±ê³µ ì§€í‘œ
**ê¸°ëŠ¥ ì™„ì„±ë„**

 - ëª¨ë“  í˜ì´ì§€ ì—ëŸ¬ ì—†ì´ ë¡œë”©
 - Learner Journey ì™„ì£¼ (íšŒì›ê°€ì… â†’ ìˆ˜ê°• â†’ ì œì¶œ â†’ ì„±ì )
 - Instructor Journey ì™„ì£¼ (íšŒì›ê°€ì… â†’ ì½”ìŠ¤ ìƒì„± â†’ ì±„ì )
 - ì§€ê° ì œì¶œ ë¡œì§ ê²€ì¦ (ì •ì‹œ/ì§€ê°/ë¶ˆê°€ ì¼€ì´ìŠ¤)
 - ì¬ì œì¶œ í”Œë¡œìš° ê²€ì¦

**ê¶Œí•œ ì œì–´**

 - ì—­í• ë³„ í˜ì´ì§€ ì ‘ê·¼ ì œì–´ ë™ì‘
 - ìˆ˜ê°• ì—¬ë¶€ ê¸°ë°˜ ì œì¶œ ì œì–´ ë™ì‘
 - RLS ì •ì±… ì ìš© í™•ì¸

**ë°°í¬**

 - Vercel ë°°í¬ ì„±ê³µ
 - ë°ëª¨ ê³„ì • 2ê°œ ë™ì‘ (Instructor 1,2, Learner 1,2)
 - ê³µê°œ URL ì ‘ì† ê°€ëŠ¥

## 10. ì œì•½ì‚¬í•­
**ê¸°ìˆ ì  ì œì•½**
- í”„ë ˆì„ì›Œí¬: Next.js 14 App Router
- ë°ì´í„°ë² ì´ìŠ¤: Supabase PostgreSQL
- ìŠ¤í† ë¦¬ì§€: Supabase Storage
- ë°°í¬: Vercel
- ì¸ì¦: Supabase Auth

**ë¹„ì¦ˆë‹ˆìŠ¤ ì œì•½**

- ë¬´ë£Œ í‹°ì–´: Supabase Free + Vercel Hobby
- ì´ˆê¸° ì‚¬ìš©ì: ë°ëª¨ìš© (10ëª… ë¯¸ë§Œ)
- ì½˜í…ì¸ : í…ìŠ¤íŠ¸ + íŒŒì¼ë§Œ (ë¹„ë””ì˜¤ ì œì™¸)
- ê²°ì œ: ì—†ìŒ (ëª¨ë“  ì½”ìŠ¤ ë¬´ë£Œ)

**ë²”ìœ„ ì œì•½ (MVP ì œì™¸)**

- ì»¤ë¦¬í˜ëŸ¼ ë¹Œë” (Sections/Lessons)
- ë¹„ë””ì˜¤ ì½˜í…ì¸ 
- ê²°ì œ ì‹œìŠ¤í…œ
- ì´ë©”ì¼ ì•Œë¦¼
- ë¦¬ë·°/í‰ì 
- ìˆ˜ë£Œì¦



<!-- Source: .ruler/ui-ux.md -->

You are a senior product designer and UX architect.

## ğŸ¯ Goal
Generate a full `UXUI.md` file for **VMC_LMS (Visual Media Creator LMS)**, aligned with the previously implemented database schema and core user flow.

The document should serve as a **design specification** bridging UX â†’ UI â†’ Frontend.

---

## ğŸ§© 1. Context
- System: VMC_LMS
- Core user types: `instructor`, `learner`
- Tech stack: Next.js + Supabase + Tailwind + Shadcn/UI
- Database spec: Profiles, Courses, Enrollments, Assignments, Submissions, Grades
- Flow coverage: Sign-up â†’ Onboarding â†’ Course â†’ Assignment â†’ Submission â†’ Grading

---

## ğŸ§­ 2. Deliverables
Produce a **single structured markdown file** titled `UXUI.md`, including:

### Section A: UX Architecture
1. **User Personas** (instructor, learner)
2. **Primary Journeys**
   - Instructor: Create â†’ Publish â†’ Manage â†’ Grade
   - Learner: Browse â†’ Enroll â†’ Submit â†’ View Feedback
3. **Information Hierarchy**
   - Key screens, primary vs secondary actions
   - State-driven transitions (`draft â†’ published`, `submitted â†’ graded`)
4. **Accessibility & Responsiveness**
   - Mobile-first flow
   - Keyboard and screen-reader compliance notes

### Section B: UI Component Map
- Each screen described as:
  ```
  ## Page: /courses/[id]/assignments/[id]
  **Purpose:** Submit assignment  
  **Components:** [AssignmentHeader, SubmissionForm, FileUpload, FeedbackBox]  
  **States:** { empty, submitted, resubmit_requested, graded }
  **Interactions:**
  - Submit triggers POST /submissions
  - Feedback auto-refresh on grading
  ```
- Use concise but consistent component naming (PascalCase)
- Mark Shadcn components with ğŸ’  emoji

### Section C: Visual System
- Typography scale (Heading / Body / Caption)
- Color palette (Neutral / Primary / Accent)
- Iconography convention (Lucide icons mapping)
- Motion: Framer Motion usage examples (transitions, hover effects)

### Section D: UX Rationale
- Justify main layout decisions (dashboard structure, button placements)
- Trade-offs (simplicity vs flexibility)
- Future extensibility notes (Phase 2: Notifications, Analytics, History)

---

## ğŸ§  3. Output Requirements
- Format strictly in valid **Markdown**
- Use **code fences** for component pseudo-structure and routes
- Maintain **consistent heading hierarchy** (## / ### / ####)
- Avoid Figma markup or image placeholders
- Keep the tone concise but professional

---

## ğŸª„ Example Output Style

````markdown
# UXUI.md - VMC_LMS

## 1. UX Architecture
### Persona: Instructor
- Goal: Publish creative media courses
- Pain points: managing submissions, feedback loops

### User Flow: Course Creation
1. Dashboard â†’ â€œNew Courseâ€
2. Fill course info â†’ Save as Draft
3. Publish â†’ Triggers visibility for learners
...
